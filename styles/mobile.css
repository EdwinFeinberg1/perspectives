/* Native iOS feel enhancements */
/* Smooth scrolling and momentum for all scrollable containers */
* {
  -webkit-tap-highlight-color: transparent;
}

/* All scrollable elements get momentum scrolling */
.overflow-y-auto,
.overflow-x-auto,
.overflow-scroll,
div[class*="overflow-y"],
div[class*="overflow-x"] {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
}

/* Dynamic Island & Notch padding for header elements */
header, 
.header, 
[class*="header"],
nav,
.nav,
[class*="nav"] {
  padding-top: max(16px, var(--safe-area-top));
}

/* Mobile first approach for form controls */
input, textarea {
  font-size: 16px;
  line-height: 1.4;
}

@media (min-width: 480px) {
  input, textarea {
    font-size: 14px;
  }
}

/* Mobile viewport optimizations */
@media (max-width: 400px) {
  /* Reduce side margins */
  header .relative.h-\[80px\] {
    padding-left: 8px;
    padding-right: 8px;
  }

  /* Adjust header elements */
  header .text-lg.md\:text-2xl {
    font-size: 1.125rem;
  }

  /* Ensure consistent message container width */
  .w-full.max-w-3xl.mx-auto {
    padding-left: 8px !important;
    padding-right: 8px !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Minimize chat bubbles padding and font size */
  [class*="rounded-[20px"] {
    padding: 12px !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    max-width: 100% !important;
    font-size: 14px !important;
  }

  /* Make message bubbles flush with container */
  .flex.flex-col.w-full.max-w-3xl.mx-auto > div[class*="rounded"] {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* Adjust message container spacing */
  .h-full.overflow-y-auto.space-y-4 {
    padding-bottom: 120px;
  }

  /* Optimize input bar */
  form.flex.items-center.w-full {
    padding: 8px 12px;
    width: 100%;
  }

  form.flex.items-center.w-full input {
    font-size: 14px;
  }

  /* Reduce fixed footer components */
  .fixed.bottom-\[60px\] {
    bottom: 50px;
  }
  
  /* Make user messages align right properly */
  [class*="ml-auto"] {
    margin-left: auto !important;
    max-width: 90% !important;
  }

  /* Override tailwind styles with stronger specificity */
  div.mx-2, div.sm\:mx-4 {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
} 

/* Handle mobile keyboard appearance */
@media (max-width: 640px) {
  /* When input is focused on mobile */
  input:focus {
    /* Prevent zoom on iOS */
    font-size: 16px !important;
  }
  
  /* Adjust layout when keyboard is visible */
  .mobile-keyboard-active {
    /* Use dynamic viewport height */
    height: calc(100dvh - 210px) !important;
    /* Ensure content remains scrollable */
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Keep personalities section visible and scrollable */
  .mobile-keyboard-active #personalities-section {
    /* Make it sticky at the top */
    position: sticky !important;
    top: 0 !important;
    z-index: 20 !important;
    /* Add background to prevent content overlap */
    background: var(--background) !important;
    /* Reduce height to leave room for chat */
    max-height: 35vh !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    /* Add some visual separation */
    border-bottom: 1px solid var(--border);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* Compact the personalities grid when keyboard is active */
  .mobile-keyboard-active #personalities-section .grid {
    gap: 0.25rem !important;
    padding: 0.5rem !important;
  }
  
  .mobile-keyboard-active #personalities-section .card {
    /* Reduce padding for more compact display */
    padding: 0.5rem !important;
  }
  
  /* Ensure chat section is scrollable */
  .mobile-keyboard-active #chatbot-section {
    /* Take remaining space */
    flex: 1 !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    /* Add padding to prevent content cutoff */
    padding-bottom: 100px !important;
  }
}

/* iOS-specific keyboard handling */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  .mobile-keyboard-active {
    /* Use visualViewport API fallback height */
    height: calc(100vh - 210px - env(keyboard-inset-height, 0px)) !important;
  }
} 